# Транспортный справочник
## Описание
"Транспортный справочник" представляет собой приложение, предназначенное для хранения данных о транспортных маршрутах и обработки запросов по ним от пользователей.

Проект был создан в рамках обучения в Яндекс Практикуме по программе "Разработчик С++".

Настоящий проект содержит следующие функциональные элементы:
- информационная база транспортного справочника;
- программные модули для обработки данных о маршрутах и остановках;
- программные модули для сериализации и десериализации данных формата JSON;
- программный модуль обработки информации о маршрутах и остановках;
- программный модуль визуализации маршрутной карты.

Транспортный справочник реализует обработку информации только для одного вида транспорта: автобус.

## Установка и сборка
Сборка и запуск проекта осуществляется на стандарте языка не ниже С++17.  
Для визуализации маршрутной карты требуется конвертер SVG.  
Сборка проекта осуществляется с помощью CMake (версия не ниже 3.12).  

Для сборки необходимо в каталоге проекта выполнить команды:

````
[mkdir build && ] cd ./build/
cmake ../
cmake --build ./ --config [Debug / Release]
````

## Руководство пользователя
### Использование
Приложение реализует два вида взаимодействия с пользователем:
- формирование запросов на заполнение базы транспортного справочника;
- обработка запросов к базе транспортного справочника.

Заполнение справочника осуществляется через поток ввода в виде структурированных запросов формата JSON-объекта.  
Обработка запросов осуществляется после заполнения справочника, и результат выводится в формате JSON-объекта.

Помимо этого потоки ввода-вывода могут быть перенаправлены в файлы, содержащие данные в формате JSON.  
Как пример, поток ввода может быть перенаправлен в файл `input.json` с помощью консоли:  
````
[имя исполняемого файла] < input.json
````  
а поток вывода - в файл `output.json`:  
````
[имя исполняемого файла] > output.json
````

### Запросы к справочнику
Запрос на заполнение базы справочника имеет следующую структуру:
````
{
	"base_requests": [ ... ],
	"render_settings": { ... },
	"routing_settings": { ... },
	"stat_requests": [ ... ]
}
````
где:  
`base_requests` - массив с информацией по маршрутам и остановкам.  
`render_settings` - словарь, содержащий параметры отображения маршрутной карты.  
`routing_settings` - словарь, содержащий маршрутные настройки.  
`stat_requests` - массив с запросами к базе справочника.  

----

Запрос на получение информации о маршруте имеет следующий вид:
````
{
	"id": 1,
	"type": "Bus",
	"name": "297"
}
````
Результат запроса имеет следующий вид:
````
{
	"curvature": 1.42963,
	"request_id": 1,
	"route_length": 5990,
	"stop_count": 4,
	"unique_stop_count": 3
}
````

----

Запрос на получение информации об автобусной остановке имеет следующий вид:
````
{
	"id": 2,
	"type": "Stop",
	"name": "Universam"
}
````
Результат запроса имеет следующий вид:
````
{
	"buses": [
		"297", "635"
	],
	"request_id": 2
}
````

----

Запрос на построение маршрутной карты имеет следующий вид:
````
{
	"type": ""Map,
	"id": 3
}
````
Результат запроса имеет следующий вид:
````
{
	"map": "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">...\n</svg>",
	"request_id": 3
}
````

----

Запрос на построение оптимального маршрута между двумя остановками:
````
{
	"type": "Route",
	"from": "Biryulyovo Zapadnoye",
	"to": "Universam",
	"id": 4
}
````
Результат запроса имеет следующий вид:
````
{
    "items": [
        {
            "stop_name": "Biryulyovo Zapadnoye",
            "time": 6,
            "type": "Wait"
        },
        {
            "bus": "297",
            "span_count": 2,
            "time": 5.235,
            "type": "Bus"
        }
    ],
    "request_id": 4,
    "total_time": 11.235
}
````